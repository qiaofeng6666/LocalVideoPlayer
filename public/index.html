<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>视频播放器</title>
    <style id="theme-style">
        body {
            font-family: Arial, sans-serif;
        }
        .video-list {
            margin-bottom: 20px;
        }
        .video-item {
            cursor: pointer;
            padding: 10px;
            border: 1px solid #ccc;
            margin-bottom: 5px;
        }
        /* 默认的白天模式样式 */
        body.day {
            background-color: white;
            color: black;
        }
        /* 黑夜模式样式 */
        body.night {
            background-color: #333;
            color: white;
        }
        /* 按钮样式 */
        .mode-toggle {
            /* position: fixed; */
            position: absolute;
            top: 10px; /* 距离顶部的距离 */
            right: 10px; /* 距离右侧的距离 */
            padding: 10px 20px;
            background-color: #007bff; /* 按钮背景颜色 */
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
        }
        .mode-toggle:hover {
            background-color: #0056b3; /* 鼠标悬停时的背景颜色 */
        }
        /* 视频播放器样式 */
        .video-player {
            display: flex;
            justify-content: center;
            align-items: center;
            height: 50vh; /* 让视频容器占据90%的视口高度 */
            margin-top: 50px; /* 避免被固定按钮遮挡 */
        }
        video {
            width: 90%; /* 根据需要调整宽度 */
            max-width: 800px; /* 最大宽度 */
            max-height: 100%; /* 最大高度 */
        }

        /* 返回顶部按钮的基本样式 */
        #backToTopBtn {
            display: none; /* 默认隐藏按钮 */
            position: fixed; /* 固定定位 */
            bottom: 20px; /* 距离底部的距离 */
            right: 20px; /* 距离右侧的距离 */
            padding: 10px 20px;
            background-color: #007bff; /* 按钮背景颜色 */
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 16px;
            opacity: 0.8; /* 初始透明度 */
            transition: opacity 0.3s ease; /* 平滑过渡效果 */
        }

        /* 鼠标悬停时增加透明度 */
        #backToTopBtn:hover {
            opacity: 1;
        }
    </style>
</head>
<body class="day">
        <!-- 切换模式按钮 -->
        <button class="mode-toggle" onclick="toggleNightMode()">🌙</button>

        <script>
            function toggleNightMode() {
                const isNight = document.body.classList.contains('night');
                document.body.className = isNight ? 'day' : 'night';
                // 更新按钮文本
                document.querySelector('.mode-toggle').textContent = isNight ? '🌙' : '🔆';
            }
        </script>
    <!-- 标题 -->
    <h1 style="text-align: center;">视频播放器</h1>
    <!-- 视频播放器 -->
    <div class="video-player">
        <video id="videoPlayer" controls></video>
    </div>
    <!-- 视频列表 -->
    <div class="video-list">
        <h2>视频列表</h2>
        <div id="videoItems"></div>
    </div>
    <!-- 返回顶部按钮 -->
    <button id="backToTopBtn" title="返回顶部">↑</button>

    <script>
        // 获取返回顶部按钮
        const backToTopBtn = document.getElementById('backToTopBtn');

        // 监听滚动事件，当用户滚动超过一定距离时显示按钮
        window.addEventListener('scroll', () => {
            if (document.body.scrollTop > 200 || document.documentElement.scrollTop > 200) {
                backToTopBtn.style.display = 'block';
            } else {
                backToTopBtn.style.display = 'none';
            }
        });

        // 点击按钮时平滑滚动到顶部
        backToTopBtn.addEventListener('click', () => {
            window.scrollTo({
                top: 0,
                behavior: 'smooth' // 平滑滚动
            });
        });
    </script>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const videoItemsContainer = document.getElementById('videoItems');
            const videoPlayer = document.getElementById('videoPlayer');

            // 获取视频列表
            fetch('/api/videos')
                .then(response => response.json())
                .then(videos => {
                    videos.forEach(videoPath => {
                        const videoItem = document.createElement('div');
                        videoItem.className = 'video-item';
                        videoItem.textContent = decodeURIComponent(videoPath.split('/').pop()); // 显示文件名
                        videoItem.onclick = () => playVideo(videoPath);
                        videoItemsContainer.appendChild(videoItem);
                    });
                })
                .catch(err => console.error('获取视频列表失败:', err));

            function playVideo(videoPath) {
                videoPlayer.src = videoPath;
                videoPlayer.load(); // 加载新的视频源
                videoPlayer.play();
            }
        });
    </script>
</body>
</html>