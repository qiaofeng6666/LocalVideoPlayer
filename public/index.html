<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>è§†é¢‘æ’­æ”¾å™¨</title>
    <style id="theme-style">
        body {
            font-family: Arial, sans-serif;
        }
        .video-list {
            margin-bottom: 20px;
        }
        .video-item {
            cursor: pointer;
            padding: 10px;
            border: 1px solid #ccc;
            margin-bottom: 5px;
        }
        /* é»˜è®¤çš„ç™½å¤©æ¨¡å¼æ ·å¼ */
        body.day {
            background-color: white;
            color: black;
        }
        /* é»‘å¤œæ¨¡å¼æ ·å¼ */
        body.night {
            background-color: #333;
            color: white;
        }
        /* æŒ‰é’®æ ·å¼ */
        .mode-toggle {
            /* position: fixed; */
            position: absolute;
            top: 10px; /* è·ç¦»é¡¶éƒ¨çš„è·ç¦» */
            right: 10px; /* è·ç¦»å³ä¾§çš„è·ç¦» */
            padding: 10px 20px;
            background-color: #007bff; /* æŒ‰é’®èƒŒæ™¯é¢œè‰² */
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
        }
        .mode-toggle:hover {
            background-color: #0056b3; /* é¼ æ ‡æ‚¬åœæ—¶çš„èƒŒæ™¯é¢œè‰² */
        }
        /* è§†é¢‘æ’­æ”¾å™¨æ ·å¼ */
        .video-player {
            display: flex;
            justify-content: center;
            align-items: center;
            height: 50vh; /* è®©è§†é¢‘å®¹å™¨å æ®90%çš„è§†å£é«˜åº¦ */
            margin-top: 50px; /* é¿å…è¢«å›ºå®šæŒ‰é’®é®æŒ¡ */
        }
        video {
            width: 90%; /* æ ¹æ®éœ€è¦è°ƒæ•´å®½åº¦ */
            max-width: 800px; /* æœ€å¤§å®½åº¦ */
            max-height: 100%; /* æœ€å¤§é«˜åº¦ */
        }

        /* è¿”å›é¡¶éƒ¨æŒ‰é’®çš„åŸºæœ¬æ ·å¼ */
        #backToTopBtn {
            display: none; /* é»˜è®¤éšè—æŒ‰é’® */
            position: fixed; /* å›ºå®šå®šä½ */
            bottom: 20px; /* è·ç¦»åº•éƒ¨çš„è·ç¦» */
            right: 20px; /* è·ç¦»å³ä¾§çš„è·ç¦» */
            padding: 10px 20px;
            background-color: #007bff; /* æŒ‰é’®èƒŒæ™¯é¢œè‰² */
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 16px;
            opacity: 0.8; /* åˆå§‹é€æ˜åº¦ */
            transition: opacity 0.3s ease; /* å¹³æ»‘è¿‡æ¸¡æ•ˆæœ */
        }

        /* é¼ æ ‡æ‚¬åœæ—¶å¢åŠ é€æ˜åº¦ */
        #backToTopBtn:hover {
            opacity: 1;
        }
    </style>
</head>
<body class="day">
        <!-- åˆ‡æ¢æ¨¡å¼æŒ‰é’® -->
        <button class="mode-toggle" onclick="toggleNightMode()">ğŸŒ™</button>

        <script>
            function toggleNightMode() {
                const isNight = document.body.classList.contains('night');
                document.body.className = isNight ? 'day' : 'night';
                // æ›´æ–°æŒ‰é’®æ–‡æœ¬
                document.querySelector('.mode-toggle').textContent = isNight ? 'ğŸŒ™' : 'ğŸ”†';
            }
        </script>
    <!-- æ ‡é¢˜ -->
    <h1 style="text-align: center;">è§†é¢‘æ’­æ”¾å™¨</h1>
    <!-- è§†é¢‘æ’­æ”¾å™¨ -->
    <div class="video-player">
        <video id="videoPlayer" controls></video>
    </div>
    <!-- è§†é¢‘åˆ—è¡¨ -->
    <div class="video-list">
        <h2>è§†é¢‘åˆ—è¡¨</h2>
        <div id="videoItems"></div>
    </div>
    <!-- è¿”å›é¡¶éƒ¨æŒ‰é’® -->
    <button id="backToTopBtn" title="è¿”å›é¡¶éƒ¨">â†‘</button>

    <script>
        // è·å–è¿”å›é¡¶éƒ¨æŒ‰é’®
        const backToTopBtn = document.getElementById('backToTopBtn');

        // ç›‘å¬æ»šåŠ¨äº‹ä»¶ï¼Œå½“ç”¨æˆ·æ»šåŠ¨è¶…è¿‡ä¸€å®šè·ç¦»æ—¶æ˜¾ç¤ºæŒ‰é’®
        window.addEventListener('scroll', () => {
            if (document.body.scrollTop > 200 || document.documentElement.scrollTop > 200) {
                backToTopBtn.style.display = 'block';
            } else {
                backToTopBtn.style.display = 'none';
            }
        });

        // ç‚¹å‡»æŒ‰é’®æ—¶å¹³æ»‘æ»šåŠ¨åˆ°é¡¶éƒ¨
        backToTopBtn.addEventListener('click', () => {
            window.scrollTo({
                top: 0,
                behavior: 'smooth' // å¹³æ»‘æ»šåŠ¨
            });
        });
    </script>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const videoItemsContainer = document.getElementById('videoItems');
            const videoPlayer = document.getElementById('videoPlayer');

            // è·å–è§†é¢‘åˆ—è¡¨
            fetch('/api/videos')
                .then(response => response.json())
                .then(videos => {
                    videos.forEach(videoPath => {
                        const videoItem = document.createElement('div');
                        videoItem.className = 'video-item';
                        videoItem.textContent = decodeURIComponent(videoPath.split('/').pop()); // æ˜¾ç¤ºæ–‡ä»¶å
                        videoItem.onclick = () => playVideo(videoPath);
                        videoItemsContainer.appendChild(videoItem);
                    });
                })
                .catch(err => console.error('è·å–è§†é¢‘åˆ—è¡¨å¤±è´¥:', err));

            function playVideo(videoPath) {
                videoPlayer.src = videoPath;
                videoPlayer.load(); // åŠ è½½æ–°çš„è§†é¢‘æº
                videoPlayer.play();
            }
        });
    </script>
</body>
</html>